<!DOCTYPE html>
<html lang="en">
  <head>
    <title>TRON  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="TRON  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          TRON Docs
        </a>
         (95% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="https://github.com/MLSDev/TRON">
            <img class="header-icon" src="img/gh.png"/>
            View on GitHub
          </a>
        </p>
    
        <p class="header-col header-col--secondary">
          <a class="header-link" href="dash-feed://https%3A%2F%2Fmlsdev%2Egithub%2Eio%2FTRON%2Fdocsets%2FTRON%2Exml">
            <img class="header-icon" src="img/dash.png"/>
            Install in Dash
          </a>
        </p>
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">TRON Reference</a>
      <img class="carat" src="img/carat.png" />
      TRON  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/APIError.html">APIError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/APIRequest.html">APIRequest</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/APIStub.html">APIStub</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/BaseRequest.html">BaseRequest</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/CodableParser.html">CodableParser</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/CodableSerializer.html">CodableSerializer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/DownloadAPIRequest.html">DownloadAPIRequest</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/JSONDecodableParser.html">JSONDecodableParser</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/JSONDecodableSerializer.html">JSONDecodableSerializer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/NetworkActivityPlugin.html">NetworkActivityPlugin</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/NetworkLoggerPlugin.html">NetworkLoggerPlugin</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TRON.html">TRON</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/URLBuilder.html">URLBuilder</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/UploadAPIRequest.html">UploadAPIRequest</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/DownloadRequestType.html">DownloadRequestType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/UploadRequestType.html">UploadRequestType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Bool.html">Bool</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Double.html">Double</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Empty.html">Empty</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Float.html">Float</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Int.html">Int</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Int16.html">Int16</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Int32.html">Int32</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Int64.html">Int64</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Int8.html">Int8</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/JSON.html">JSON</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/String.html">String</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/UInt.html">UInt</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/UInt16.html">UInt16</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/UInt32.html">UInt32</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/UInt64.html">UInt64</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/UInt8.html">UInt8</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/DownloadErrorSerializable.html">DownloadErrorSerializable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/ErrorSerializable.html">ErrorSerializable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/JSONDecodable.html">JSONDecodable</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/Plugin.html">Plugin</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TronDelegate.html">TronDelegate</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/URLBuildable.html">URLBuildable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/DownloadError.html">DownloadError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TRONDataResponseSerializer.html">TRONDataResponseSerializer</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TRONDownloadResponseSerializer.html">TRONDownloadResponseSerializer</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content">
            
            <p align="center">
  <img src="https://github.com/MLSDev/TRON/blob/master/TRON.png" />
</p>

<p><img src="https://travis-ci.org/MLSDev/TRON.svg?branch=master" alt="Build Status"> &nbsp;
<a href="https://codecov.io/github/MLSDev/TRON?branch=master"><img src="https://codecov.io/github/MLSDev/TRON/coverage.svg?branch=master" alt="codecov.io"></a>
<img src="https://cocoapod-badges.herokuapp.com/p/TRON/badge.png" alt="CocoaPod platform"> &nbsp;
<img src="https://cocoapod-badges.herokuapp.com/v/TRON/badge.png" alt="CocoaPod version"> &nbsp;
<a href="https://github.com/Carthage/Carthage"><img src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat" alt="Carthage compatible"></a>
<a href=""><img src="https://img.shields.io/packagist/l/doctrine/orm.svg" alt="Packagist"></a></p>

<p>TRON is a lightweight network abstraction layer, built on top of <a href="https://github.com/Alamofire/Alamofire">Alamofire</a>. It can be used to dramatically simplify interacting with RESTful JSON web-services.</p>
<h2 id='features' class='heading'>Features</h2>

<ul>
<li>[x] Generic, protocol-based implementation</li>
<li>[x] Built-in response and error parsing</li>
<li>[x] Support for any custom mapper. Defaults to <a href="https://github.com/SwiftyJSON/SwiftyJSON">SwiftyJSON</a> and Codable protocol in Swift 4.</li>
<li>[x] Support for upload tasks</li>
<li>[x] Support for download tasks and resuming downloads</li>
<li>[x] Robust plugin system</li>
<li>[x] Stubbing of network requests</li>
<li>[x] Modular architecture</li>
<li>[x] Support for iOS/Mac OS X/tvOS/watchOS/Linux</li>
<li>[x] Support for CocoaPods/Carthage/Swift Package Manager</li>
<li>[x] RxSwift extension</li>
</ul>
<h2 id='overview' class='heading'>Overview</h2>

<p>We designed TRON to be simple to use and also very easy to customize. After initial setup, using TRON is very straightforward:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">APIRequest</span><span class="o">&lt;</span><span class="kt">User</span><span class="p">,</span><span class="kt">MyAppError</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">codable</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="s">"me"</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="nf">perform</span><span class="p">(</span><span class="nv">withSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">user</span> <span class="k">in</span>
  <span class="nf">print</span><span class="p">(</span><span class="s">"Received User: </span><span class="se">\(</span><span class="n">user</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">},</span> <span class="nv">failure</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
  <span class="nf">print</span><span class="p">(</span><span class="s">"User request failed, parsed error: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>
<h2 id='requirements' class='heading'>Requirements</h2>

<ul>
<li>Xcode 8.3/9.x</li>
<li>Swift &frac34;</li>
<li>iOS 8 / macOS 10.10 / tvOS 9.0 / watchOS 2.0</li>
</ul>
<h2 id='installation' class='heading'>Installation</h2>
<h3 id='cocoapods' class='heading'>CocoaPods</h3>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s1">'TRON'</span><span class="p">,</span> <span class="s1">'~&gt; 4.0'</span>
</code></pre>

<p>Only Core subspec, without SwiftyJSON dependency:</p>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s1">'TRON/Core'</span><span class="p">,</span> <span class="s1">'~&gt; 4.0'</span>
</code></pre>

<p>RxSwift extension for TRON:</p>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s1">'TRON/RxSwift'</span><span class="p">,</span> <span class="s1">'~&gt; 4.0'</span>
</code></pre>
<h3 id='carthage' class='heading'>Carthage</h3>
<pre class="highlight ruby"><code><span class="n">github</span> <span class="s2">"MLSDev/TRON"</span><span class="p">,</span> <span class="o">~&gt;</span> <span class="mi">4</span><span class="o">.</span><span class="mi">0</span>
</code></pre>
<h2 id='migration-guides' class='heading'>Migration Guides</h2>

<ul>
<li><a href="https://github.com/MLSDev/TRON/blob/master/Docs/4.0%20Migration%20Guide.md">TRON 4.0 Migration Guide</a></li>
<li><a href="https://github.com/MLSDev/TRON/blob/master/Docs/2.0%20Migration%20Guide.md">TRON 2.0 Migration Guide</a></li>
<li><a href="https://github.com/MLSDev/TRON/blob/master/Docs/1.0%20Migration%20Guide.md">TRON 1.0 Migration Guide</a></li>
</ul>
<h2 id='project-status' class='heading'>Project status</h2>

<p><code><a href="Classes/TRON.html">TRON</a></code> is under active development by MLSDev Inc. Pull requests are welcome!</p>
<h2 id='request-building' class='heading'>Request building</h2>

<p><code><a href="Classes/TRON.html">TRON</a></code> object serves as initial configurator for <code><a href="Classes/APIRequest.html">APIRequest</a></code>, setting all base values and configuring to use with baseURL.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">tron</span> <span class="o">=</span> <span class="kt">TRON</span><span class="p">(</span><span class="nv">baseURL</span><span class="p">:</span> <span class="s">"https://api.myapp.com/"</span><span class="p">)</span>
</code></pre>

<p>You need to keep strong reference to <code><a href="Classes/TRON.html">TRON</a></code> object, because it holds Alamofire.Manager, that is running all requests.</p>
<h3 id='urlbuildable' class='heading'>URLBuildable</h3>

<p><code><a href="Protocols/URLBuildable.html">URLBuildable</a></code> protocol is used to convert relative path to URL, that will be used by request.</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">URLBuildable</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">url</span><span class="p">(</span><span class="n">forPath</span> <span class="nv">path</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">URL</span>
<span class="p">}</span>
</code></pre>

<p>By default, <code><a href="Classes/TRON.html">TRON</a></code> uses <code><a href="Classes/URLBuilder.html">URLBuilder</a></code> class, that simply appends relative path to base URL, which is sufficient in most cases. You can customize url building process globally by changing <code>urlBuilder</code> property on <code><a href="Classes/TRON.html">TRON</a></code> or locally, for a single request by modifying <code>urlBuilder</code> property on <code><a href="Classes/APIRequest.html">APIRequest</a></code>.</p>
<h3 id='headerbuildable' class='heading'>HeaderBuildable</h3>

<p><code>HeaderBuildable</code> protocol is used to configure HTTP headers on your request.</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">HeaderBuildable</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">headers</span><span class="p">(</span><span class="n">forAuthorizationRequirement</span> <span class="nv">requirement</span><span class="p">:</span> <span class="kt">AuthorizationRequirement</span><span class="p">,</span> <span class="n">including</span> <span class="nv">headers</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span><span class="kt">String</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">String</span><span class="p">]</span>
<span class="p">}</span>
</code></pre>

<p><code>AuthorizationRequirement</code> is an enum with three values:</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">AuthorizationRequirement</span> <span class="p">{</span>
    <span class="k">case</span> <span class="k">none</span><span class="p">,</span> <span class="n">allowed</span><span class="p">,</span> <span class="kd">required</span>
<span class="p">}</span>
</code></pre>

<p>It represents scenarios where user is not authorized, user is authorized, but authorization is not required, and a case, where request requires authorization.</p>

<p>By default, <code><a href="Classes/TRON.html">TRON</a></code> uses <code>HeaderBuilder</code> class, which adds <q>Accept</q>:<q>application/json</q> header to your requests.</p>
<h2 id='sending-requests' class='heading'>Sending requests</h2>

<p>To send <code><a href="Classes/APIRequest.html">APIRequest</a></code>, call <code>perform(withSuccess:failure:)</code> method on <code><a href="Classes/APIRequest.html">APIRequest</a></code>:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">alamofireRequest</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="nf">perform</span><span class="p">(</span><span class="nv">withSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span> <span class="p">},</span> <span class="nv">failure</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span><span class="p">})</span>
</code></pre>

<p>Notice that <code>alamofireRequest</code> variable returned from this method is an Alamofire.Request?, that will be nil if request is stubbed.</p>

<p>Alternatively, you can use <code>performCollectingTimeline(withCompletion:)</code> method that contains <code>Alamofire.Response</code> inside completion closure:</p>
<pre class="highlight swift"><code><span class="n">request</span><span class="o">.</span><span class="nf">performCollectingTimeline</span><span class="p">(</span><span class="nv">withCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">timeline</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>

<p>In both cases, you can additionally chain <code>Alamofire.Request</code> methods, if you need:</p>
<pre class="highlight swift"><code><span class="n">request</span><span class="o">.</span><span class="nf">perform</span><span class="p">(</span><span class="nv">withSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span> <span class="p">},</span> <span class="nv">failure</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span> <span class="p">})?</span><span class="o">.</span><span class="n">progress</span> <span class="p">{</span> <span class="n">bytesWritten</span><span class="p">,</span> <span class="n">totalBytesWritten</span><span class="p">,</span> <span class="n">totalBytesExpectedToWrite</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">bytesWritten</span><span class="p">,</span> <span class="n">totalBytesWritten</span><span class="p">,</span> <span class="n">totalBytesExpectedToWrite</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h2 id='response-parsing' class='heading'>Response parsing</h2>

<p>Generic <code><a href="Classes/APIRequest.html">APIRequest</a></code> implementation allows us to define expected response type before request is even sent. We use <code>Alamofire</code> <code>DataResponseSerializerProtocol</code>, and are adding to it <code>ErrorHandlingDataResponseSerializerProtocol</code>, which basically allows us to have two generics for both success and error values.</p>
<pre class="highlight swift"><code>
<span class="c1">// Alamofire 4:</span>

<span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">DataResponseSerializerProtocol</span> <span class="p">{</span>
    <span class="kd">associatedtype</span> <span class="kt">SerializedObject</span>

    <span class="k">var</span> <span class="nv">serializeResponse</span><span class="p">:</span> <span class="p">(</span><span class="kt">URLRequest</span><span class="p">?,</span> <span class="kt">HTTPURLResponse</span><span class="p">?,</span> <span class="kt">Data</span><span class="p">?,</span> <span class="kt">Error</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">Result</span><span class="o">&lt;</span><span class="kt">SerializedObject</span><span class="o">&gt;</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// TRON:</span>

<span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">ErrorHandlingDataResponseSerializerProtocol</span> <span class="p">:</span> <span class="kt">DataResponseSerializerProtocol</span> <span class="p">{</span>
    <span class="kd">associatedtype</span> <span class="kt">SerializedError</span>

    <span class="k">var</span> <span class="nv">serializeError</span><span class="p">:</span> <span class="p">(</span><span class="kt">Alamofire</span><span class="o">.</span><span class="kt">Result</span><span class="o">&lt;</span><span class="kt">SerializedObject</span><span class="o">&gt;</span><span class="p">?,</span><span class="kt">URLRequest</span><span class="p">?,</span> <span class="kt">HTTPURLResponse</span><span class="p">?,</span> <span class="kt">Data</span><span class="p">?,</span> <span class="kt">Error</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">APIError</span><span class="o">&lt;</span><span class="kt">SerializedError</span><span class="o">&gt;</span> <span class="p">{</span> <span class="k">get</span> <span class="p">}</span>
<span class="p">}</span>

</code></pre>
<h3 id='codable' class='heading'>Codable</h3>

<p>Parsing models using Swift4 <code>Codable</code> protocol is simple, implement <code>Codable</code> protocol:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">User</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
  <span class="k">let</span> <span class="nv">name</span> <span class="p">:</span> <span class="kt">String</span>
  <span class="k">let</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span>
<span class="p">}</span>
</code></pre>

<p>And send a request:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">APIRequest</span><span class="o">&lt;</span><span class="kt">User</span><span class="p">,</span><span class="kt">MyAppError</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">codable</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="s">"me"</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="nf">perform</span><span class="p">(</span><span class="nv">withSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">user</span> <span class="k">in</span>
  <span class="nf">print</span><span class="p">(</span><span class="s">"Received user: </span><span class="se">\(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="se">)</span><span class="s"> with id: </span><span class="se">\(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>

<p>It&rsquo;s possible to customize decoders for both model and error parsing:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">userDecoder</span> <span class="o">=</span> <span class="kt">JSONDecoder</span><span class="p">()</span>
<span class="c1">// Customization for user decoder...</span>
<span class="k">let</span> <span class="nv">errorDecoder</span> <span class="o">=</span> <span class="kt">JSONDecoder</span><span class="p">()</span>
<span class="c1">// Customization for error decoder...</span>

<span class="k">let</span> <span class="nv">request</span> <span class="p">:</span> <span class="kt">APIRequest</span><span class="o">&lt;</span><span class="kt">User</span><span class="p">,</span><span class="kt">MyAppError</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="nf">codable</span><span class="p">(</span><span class="nv">modelDecoder</span><span class="p">:</span> <span class="n">userDecoder</span><span class="p">,</span> <span class="nv">errorDecoder</span><span class="p">:</span> <span class="n">errorDecoder</span><span class="p">)</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="s">"me"</span><span class="p">)</span>
</code></pre>
<h3 id='jsondecodable' class='heading'>JSONDecodable</h3>

<p><code><a href="Classes/TRON.html">TRON</a></code> provides <code><a href="Protocols/JSONDecodable.html">JSONDecodable</a></code> protocol, that allows us to parse models using <a href="https://github.com/SwiftyJSON/SwiftyJSON">SwiftyJSON</a>:</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">JSONDecodable</span> <span class="p">{</span>
    <span class="nf">init</span><span class="p">(</span><span class="nv">json</span><span class="p">:</span> <span class="kt">JSON</span><span class="p">)</span> <span class="k">throws</span>
<span class="p">}</span>
</code></pre>

<p>To parse your response from the server using <code>SwiftyJSON</code>, all you need to do is to create <code><a href="Protocols/JSONDecodable.html">JSONDecodable</a></code> conforming type, for example:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">User</span><span class="p">:</span> <span class="kt">JSONDecodable</span> <span class="p">{</span>
  <span class="k">let</span> <span class="nv">name</span> <span class="p">:</span> <span class="kt">String</span>
  <span class="k">let</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span>

  <span class="kd">required</span> <span class="nf">init</span><span class="p">(</span><span class="nv">json</span><span class="p">:</span> <span class="kt">JSON</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s">"name"</span><span class="p">]</span><span class="o">.</span><span class="n">stringValue</span>
    <span class="n">id</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s">"id"</span><span class="p">]</span><span class="o">.</span><span class="n">intValue</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>And send a request:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">APIRequest</span><span class="o">&lt;</span><span class="kt">User</span><span class="p">,</span><span class="kt">MyAppError</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">swiftyJSON</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="s">"me"</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="nf">perform</span><span class="p">(</span><span class="nv">withSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">user</span> <span class="k">in</span>
  <span class="nf">print</span><span class="p">(</span><span class="s">"Received user: </span><span class="se">\(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="se">)</span><span class="s"> with id: </span><span class="se">\(</span><span class="n">user</span><span class="o">.</span><span class="n">id</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>

<p>There are also default implementations of <code><a href="Protocols/JSONDecodable.html">JSONDecodable</a></code> protocol for Swift built-in types like String, Int, Float, Double and Bool, so you can easily do something like this:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span> <span class="p">:</span> <span class="kt">APIRequest</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span><span class="kt">MyAppError</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">swiftyJSON</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="s">"status"</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="nf">perform</span><span class="p">(</span><span class="nv">withSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">status</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Server status: </span><span class="se">\(</span><span class="n">status</span><span class="se">)</span><span class="s">"</span><span class="p">)</span> <span class="c1">//</span>
<span class="p">})</span>
</code></pre>

<p>You can also use <code>EmptyResponse</code> struct in cases where you don&rsquo;t care about actual response.</p>

<p>Some concepts for response serialization, including array response serializer, are described in <a href="https://github.com/MLSDev/TRON/blob/master/Docs/Response%20Serializers.md">Response Serializers document</a></p>

<p>It&rsquo;s possible to customize <code>JSONSerialization.ReadingOptions</code>, that are used by <code>SwiftyJSON.JSON</code> object while parsing data of the response:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span> <span class="p">:</span> <span class="kt">APIRequest</span><span class="o">&lt;</span><span class="kt">String</span><span class="p">,</span> <span class="kt">MyAppError</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="nf">swiftyJSON</span><span class="p">(</span><span class="nv">readingOptions</span><span class="p">:</span> <span class="o">.</span><span class="n">allowFragments</span><span class="p">)</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="s">"status"</span><span class="p">)</span>
</code></pre>
<h2 id='rxswift' class='heading'>RxSwift</h2>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span> <span class="p">:</span> <span class="kt">APIRequest</span><span class="o">&lt;</span><span class="kt">Foo</span><span class="p">,</span> <span class="kt">MyError</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">codable</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="s">"foo"</span><span class="p">)</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="nf">rxResult</span><span class="p">()</span><span class="o">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="nv">onNext</span><span class="p">:</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">multipartRequest</span> <span class="p">:</span> <span class="kt">UploadAPIREquest</span><span class="o">&lt;</span><span class="kt">Foo</span><span class="p">,</span><span class="kt">MyError</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">codable</span><span class="o">.</span><span class="nf">upload</span><span class="p">(</span><span class="s">"foo"</span><span class="p">,</span> <span class="nv">formData</span><span class="p">:</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span> <span class="p">})</span>
<span class="n">multipartRequest</span><span class="o">.</span><span class="nf">rxMultipartResult</span><span class="p">()</span><span class="o">.</span><span class="nf">subscribe</span><span class="p">(</span><span class="nv">onNext</span><span class="p">:</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>
<h3 id='error-handling' class='heading'>Error handling</h3>

<p><code><a href="Classes/TRON.html">TRON</a></code> includes built-in parsing for errors. <code><a href="Classes/APIError.html">APIError</a></code> is a generic class, that includes several default properties, that can be fetched from unsuccessful request:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">APIError</span><span class="o">&lt;</span><span class="kt">T</span><span class="o">&gt;</span> <span class="p">:</span> <span class="kt">Error</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">request</span> <span class="p">:</span> <span class="kt">URLRequest</span><span class="p">?</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">response</span> <span class="p">:</span> <span class="kt">HTTPURLResponse</span><span class="p">?</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">data</span> <span class="p">:</span> <span class="kt">Data</span><span class="p">?</span>
    <span class="kd">public</span> <span class="k">let</span> <span class="nv">error</span> <span class="p">:</span> <span class="kt">Error</span><span class="p">?</span>
    <span class="kd">public</span> <span class="k">var</span> <span class="nv">errorModel</span><span class="p">:</span> <span class="kt">T</span><span class="p">?</span>
<span class="p">}</span>
</code></pre>

<p>When <code><a href="Classes/APIRequest.html">APIRequest</a></code> fails, you receive concrete APIError instance, for example, let&rsquo;s define <code>MyAppError</code> we have been talking about:</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">MyAppError</span> <span class="p">:</span> <span class="kt">JSONDecodable</span> <span class="p">{</span>
  <span class="k">var</span> <span class="nv">errors</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">:[</span><span class="kt">String</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[:]</span>

  <span class="kd">required</span> <span class="nf">init</span><span class="p">(</span><span class="nv">json</span><span class="p">:</span> <span class="kt">JSON</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="k">let</span> <span class="nv">dictionary</span> <span class="o">=</span> <span class="n">json</span><span class="p">[</span><span class="s">"errors"</span><span class="p">]</span><span class="o">.</span><span class="n">dictionary</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span><span class="n">value</span><span class="p">)</span> <span class="k">in</span> <span class="n">dictionary</span> <span class="p">{</span>
          <span class="n">errors</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">arrayValue</span><span class="o">.</span><span class="nf">map</span><span class="p">(</span> <span class="p">{</span> <span class="k">return</span> <span class="nv">$0</span><span class="o">.</span><span class="n">stringValue</span> <span class="p">}</span> <span class="p">)</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>This way, you only need to define how your errors are parsed, and not worry about other failure details like response code, because they are already included:</p>
<pre class="highlight swift"><code><span class="n">request</span><span class="o">.</span><span class="nf">perform</span><span class="p">(</span><span class="nv">withSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span> <span class="p">},</span> <span class="nv">failure</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">request</span><span class="p">)</span> <span class="c1">// Original URLRequest</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">response</span><span class="p">)</span> <span class="c1">// HTTPURLResponse</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">data</span><span class="p">)</span> <span class="c1">// Data of response</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">error</span><span class="p">)</span> <span class="c1">// Error from Foundation Loading system</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="o">.</span><span class="n">errorModel</span><span class="o">.</span><span class="n">errors</span><span class="p">)</span> <span class="c1">// MyAppError parsed property</span>
  <span class="p">})</span>
</code></pre>
<h2 id='using-alamofire-custom-response-serializers' class='heading'>Using Alamofire custom response serializers</h2>

<p>Any custom response serializer for <code>Alamofire</code> can be used with TRON, you just need to specify error type, that will be used, for example, if <code>CustomError</code> is <code><a href="Protocols/JSONDecodable.html">JSONDecodable</a></code>:</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">DataResponseSerializer</span> <span class="p">:</span> <span class="kt">ErrorHandlingDataResponseSerializerProtocol</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">typealias</span> <span class="kt">SerializedError</span> <span class="o">=</span> <span class="kt">CustomError</span>

    <span class="kd">public</span> <span class="k">var</span> <span class="nv">serializeError</span><span class="p">:</span> <span class="p">(</span><span class="kt">Result</span><span class="o">&lt;</span><span class="kt">SerializedObject</span><span class="o">&gt;</span><span class="p">?,</span> <span class="kt">URLRequest</span><span class="p">?,</span> <span class="kt">HTTPURLResponse</span><span class="p">?,</span> <span class="kt">Data</span><span class="p">?,</span> <span class="kt">Error</span><span class="p">?)</span> <span class="o">-&gt;</span> <span class="kt">APIError</span><span class="o">&lt;</span><span class="kt">SerializedError</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span> <span class="n">erroredResponse</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
            <span class="k">let</span> <span class="nv">serializationError</span> <span class="p">:</span> <span class="kt">Error</span><span class="p">?</span> <span class="o">=</span> <span class="n">erroredResponse</span><span class="p">?</span><span class="o">.</span><span class="n">error</span> <span class="p">??</span> <span class="n">error</span>
            <span class="k">var</span> <span class="nv">error</span> <span class="o">=</span> <span class="kt">APIError</span><span class="o">&lt;</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">request</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span> <span class="nv">response</span><span class="p">:</span> <span class="n">response</span><span class="p">,</span><span class="nv">data</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="nv">error</span><span class="p">:</span> <span class="n">serializationError</span><span class="p">)</span>

            <span class="c1">// Here you can define, how error needs to be parsed</span>
            <span class="n">error</span><span class="o">.</span><span class="n">errorModel</span> <span class="o">=</span>  <span class="k">try</span><span class="p">?</span> <span class="kt">ErrorModel</span><span class="o">.</span><span class="nf">init</span><span class="p">(</span><span class="nv">json</span><span class="p">:</span> <span class="kt">JSON</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span> <span class="n">data</span> <span class="p">??</span> <span class="kt">Data</span><span class="p">()))</span>
            <span class="k">return</span> <span class="n">error</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h2 id='crud' class='heading'>CRUD</h2>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">Users</span>
<span class="p">{</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">tron</span> <span class="o">=</span> <span class="kt">TRON</span><span class="p">(</span><span class="nv">baseURL</span><span class="p">:</span> <span class="s">"https://api.myapp.com"</span><span class="p">)</span>

    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">create</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">APIRequest</span><span class="o">&lt;</span><span class="kt">User</span><span class="p">,</span><span class="kt">MyAppError</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">APIRequest</span><span class="o">&lt;</span><span class="kt">User</span><span class="p">,</span><span class="kt">MyAppError</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">codable</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="s">"users"</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="o">.</span><span class="n">post</span>
        <span class="k">return</span> <span class="n">request</span>
    <span class="p">}</span>

    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">read</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">APIRequest</span><span class="o">&lt;</span><span class="kt">User</span><span class="p">,</span> <span class="kt">MyAppError</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">tron</span><span class="o">.</span><span class="n">codable</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="s">"users/</span><span class="se">\(</span><span class="n">id</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">update</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span><span class="kt">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kt">APIRequest</span><span class="o">&lt;</span><span class="kt">User</span><span class="p">,</span> <span class="kt">MyAppError</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">APIRequest</span><span class="o">&lt;</span><span class="kt">User</span><span class="p">,</span><span class="kt">MyAppError</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">codable</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="s">"users/</span><span class="se">\(</span><span class="n">id</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="o">.</span><span class="n">put</span>
        <span class="n">request</span><span class="o">.</span><span class="n">parameters</span> <span class="o">=</span> <span class="n">parameters</span>
        <span class="k">return</span> <span class="n">request</span>
    <span class="p">}</span>

    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">delete</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">APIRequest</span><span class="o">&lt;</span><span class="kt">User</span><span class="p">,</span><span class="kt">MyAppError</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">APIRequest</span><span class="o">&lt;</span><span class="kt">User</span><span class="p">,</span><span class="kt">MyAppError</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">codable</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="s">"users/</span><span class="se">\(</span><span class="n">id</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="n">request</span><span class="o">.</span><span class="n">method</span> <span class="o">=</span> <span class="o">.</span><span class="n">delete</span>
        <span class="k">return</span> <span class="n">request</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Using these requests is really simple:</p>
<pre class="highlight swift"><code><span class="kt">Users</span><span class="o">.</span><span class="nf">read</span><span class="p">(</span><span class="mi">56</span><span class="p">)</span><span class="o">.</span><span class="nf">perform</span><span class="p">(</span><span class="nv">withSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">user</span> <span class="k">in</span>
  <span class="nf">print</span><span class="p">(</span><span class="s">"received user id 56 with name: </span><span class="se">\(</span><span class="n">user</span><span class="o">.</span><span class="n">name</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>

<p>It can be also nice to introduce namespacing to your API:</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">API</span> <span class="p">{}</span>
<span class="kd">extension</span> <span class="kt">API</span> <span class="p">{</span>
  <span class="kd">enum</span> <span class="kt">Users</span> <span class="p">{</span>
    <span class="c1">// ...</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>This way you can call your API methods like so:</p>
<pre class="highlight swift"><code><span class="kt">API</span><span class="o">.</span><span class="kt">Users</span><span class="o">.</span><span class="nf">delete</span><span class="p">(</span><span class="mi">56</span><span class="p">)</span><span class="o">.</span><span class="nf">perform</span><span class="p">(</span><span class="nv">withSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">user</span> <span class="k">in</span>
  <span class="nf">print</span><span class="p">(</span><span class="s">"user </span><span class="se">\(</span><span class="n">user</span><span class="se">)</span><span class="s"> deleted"</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>
<h2 id='stubbing' class='heading'>Stubbing</h2>

<p>Stubbing is built right into APIRequest itself. All you need to stub a successful request is to set apiStub property and turn stubbingEnabled on:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">API</span><span class="o">.</span><span class="kt">Users</span><span class="o">.</span><span class="nf">get</span><span class="p">(</span><span class="mi">56</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="n">stubbingEnabled</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">request</span><span class="o">.</span><span class="n">apiStub</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="kt">User</span><span class="o">.</span><span class="nf">fixture</span><span class="p">()</span>

<span class="n">request</span><span class="o">.</span><span class="nf">perform</span><span class="p">(</span><span class="nv">withSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">stubbedUser</span> <span class="k">in</span>
  <span class="nf">print</span><span class="p">(</span><span class="s">"received stubbed User model: </span><span class="se">\(</span><span class="n">stubbedUser</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>

<p>Stubbing can be enabled globally on <code><a href="Classes/TRON.html">TRON</a></code> object or locally for a single <code><a href="Classes/APIRequest.html">APIRequest</a></code>. Stubbing unsuccessful requests is easy as well:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">API</span><span class="o">.</span><span class="kt">Users</span><span class="o">.</span><span class="nf">get</span><span class="p">(</span><span class="mi">56</span><span class="p">)</span>
<span class="n">request</span><span class="o">.</span><span class="n">stubbingEnabled</span> <span class="o">=</span> <span class="kc">true</span>
<span class="n">request</span><span class="o">.</span><span class="n">apiStub</span><span class="o">.</span><span class="n">error</span> <span class="o">=</span> <span class="kt">APIError</span><span class="o">&lt;</span><span class="kt">MyAppError</span><span class="o">&gt;.</span><span class="nf">fixtureError</span><span class="p">()</span>
<span class="n">request</span><span class="o">.</span><span class="nf">perform</span><span class="p">(</span><span class="nv">withSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">_</span> <span class="k">in</span> <span class="p">},</span> <span class="nv">failure</span><span class="p">:</span> <span class="p">{</span> <span class="n">error</span> <span class="k">in</span>
  <span class="nf">print</span><span class="p">(</span><span class="s">"received stubbed api error"</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>

<p>You can also optionally delay stubbing time or explicitly set that api stub should fail:</p>
<pre class="highlight swift"><code><span class="n">request</span><span class="o">.</span><span class="n">apiStub</span><span class="o">.</span><span class="n">stubDelay</span> <span class="o">=</span> <span class="mf">1.5</span>
<span class="n">request</span><span class="o">.</span><span class="n">apiStub</span><span class="o">.</span><span class="n">successful</span> <span class="o">=</span> <span class="kc">false</span>
</code></pre>
<h2 id='upload' class='heading'>Upload</h2>

<ul>
<li>From file:</li>
</ul>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">codable</span><span class="o">.</span><span class="nf">upload</span><span class="p">(</span><span class="s">"photo"</span><span class="p">,</span> <span class="nv">fromFileAt</span><span class="p">:</span> <span class="n">fileUrl</span><span class="p">)</span>
</code></pre>

<ul>
<li>Data:</li>
</ul>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">codable</span><span class="o">.</span><span class="nf">upload</span><span class="p">(</span><span class="s">"photo"</span><span class="p">,</span> <span class="nv">data</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span>
</code></pre>

<ul>
<li>Stream:</li>
</ul>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">codable</span><span class="o">.</span><span class="nf">upload</span><span class="p">(</span><span class="s">"photo"</span><span class="p">,</span> <span class="nv">fromStream</span><span class="p">:</span> <span class="n">stream</span><span class="p">)</span>
</code></pre>

<ul>
<li>Multipart-form data:</li>
</ul>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">UploadAPIRequest</span><span class="o">&lt;</span><span class="kt">EmptyResponse</span><span class="p">,</span><span class="kt">MyAppError</span><span class="o">&gt;</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">codable</span><span class="o">.</span><span class="nf">uploadMultipart</span><span class="p">(</span><span class="s">"form"</span><span class="p">)</span> <span class="p">{</span> <span class="n">formData</span> <span class="k">in</span>
    <span class="n">formData</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nv">withName</span><span class="p">:</span> <span class="s">"cat"</span><span class="p">,</span> <span class="nv">mimeType</span><span class="p">:</span> <span class="s">"image/jpeg"</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">request</span><span class="o">.</span><span class="nf">performMultipart</span><span class="p">(</span><span class="nv">withSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">result</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"form sent successfully"</span><span class="p">)</span>
<span class="p">})</span>
</code></pre>

<p><strong>Note</strong> Multipart form data uploads use <code>MultipartAPIRequest</code> class instead of <code><a href="Classes/APIRequest.html">APIRequest</a></code> and have different perform method.</p>
<h2 id='download' class='heading'>Download</h2>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">codable</span><span class="o">.</span><span class="nf">download</span><span class="p">(</span><span class="s">"file"</span><span class="p">,</span> <span class="nv">to</span><span class="p">:</span> <span class="n">destination</span><span class="p">)</span>
</code></pre>

<p>Resume downloads:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="n">tron</span><span class="o">.</span><span class="n">codable</span><span class="o">.</span><span class="nf">download</span><span class="p">(</span><span class="s">"file"</span><span class="p">,</span> <span class="nv">to</span><span class="p">:</span> <span class="n">destination</span><span class="p">,</span> <span class="nv">resumingFrom</span><span class="p">:</span> <span class="n">data</span><span class="p">)</span>
</code></pre>
<h2 id='plugins' class='heading'>Plugins</h2>

<p><code><a href="Classes/TRON.html">TRON</a></code> includes plugin system, that allows reacting to most of request events.</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">Plugin</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="n">willSendRequest</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">BaseRequest</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">)</span>

    <span class="kd">func</span> <span class="n">willSendAlamofireRequest</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">Request</span><span class="p">,</span> <span class="n">formedFrom</span> <span class="nv">tronRequest</span><span class="p">:</span> <span class="kt">BaseRequest</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">)</span>

    <span class="kd">func</span> <span class="n">didSendAlamofireRequest</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span> <span class="nv">request</span> <span class="p">:</span> <span class="kt">Request</span><span class="p">,</span> <span class="n">formedFrom</span> <span class="nv">tronRequest</span><span class="p">:</span> <span class="kt">BaseRequest</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">)</span>

    <span class="kd">func</span> <span class="n">willProcessResponse</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">response</span><span class="p">:</span> <span class="p">(</span><span class="kt">URLRequest</span><span class="p">?,</span> <span class="kt">HTTPURLResponse</span><span class="p">?,</span> <span class="kt">Data</span><span class="p">?,</span> <span class="kt">Error</span><span class="p">?),</span>
                                                <span class="n">forRequest</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">Request</span><span class="p">,</span>
                                                <span class="n">formedFrom</span> <span class="nv">tronRequest</span><span class="p">:</span> <span class="kt">BaseRequest</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">)</span>

    <span class="kd">func</span> <span class="n">didSuccessfullyParseResponse</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span> <span class="nv">response</span><span class="p">:</span> <span class="p">(</span><span class="kt">URLRequest</span><span class="p">?,</span> <span class="kt">HTTPURLResponse</span><span class="p">?,</span> <span class="kt">Data</span><span class="p">?,</span> <span class="kt">Error</span><span class="p">?),</span>
                                                        <span class="n">creating</span> <span class="nv">result</span><span class="p">:</span> <span class="kt">Model</span><span class="p">,</span>
                                                        <span class="n">forRequest</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">Request</span><span class="p">,</span>
                                                        <span class="n">formedFrom</span> <span class="nv">tronRequest</span><span class="p">:</span> <span class="kt">BaseRequest</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">)</span>

    <span class="kd">func</span> <span class="n">didReceiveError</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span> <span class="nv">error</span><span class="p">:</span> <span class="kt">APIError</span><span class="o">&lt;</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">,</span>
                                        <span class="n">forResponse</span> <span class="nv">response</span> <span class="p">:</span> <span class="p">(</span><span class="kt">URLRequest</span><span class="p">?,</span> <span class="kt">HTTPURLResponse</span><span class="p">?,</span> <span class="kt">Data</span><span class="p">?,</span> <span class="kt">Error</span><span class="p">?),</span>
                                        <span class="nv">request</span><span class="p">:</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">Request</span><span class="p">,</span>
                                        <span class="n">formedFrom</span> <span class="nv">tronRequest</span><span class="p">:</span> <span class="kt">BaseRequest</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">)</span>

    <span class="kd">func</span> <span class="n">didReceiveDataResponse</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span> <span class="nv">response</span><span class="p">:</span> <span class="kt">DataResponse</span><span class="o">&lt;</span><span class="kt">Model</span><span class="o">&gt;</span><span class="p">,</span>
                                        <span class="n">forRequest</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">Request</span><span class="p">,</span>
                                        <span class="n">formedFrom</span> <span class="nv">tronRequest</span><span class="p">:</span> <span class="kt">BaseRequest</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">)</span>

    <span class="kd">func</span> <span class="n">didReceiveDownloadResponse</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">(</span><span class="n">_</span> <span class="nv">response</span><span class="p">:</span> <span class="kt">DownloadResponse</span><span class="o">&lt;</span><span class="kt">Model</span><span class="o">&gt;</span><span class="p">,</span>
                                                    <span class="n">forRequest</span> <span class="nv">request</span><span class="p">:</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">DownloadRequest</span><span class="p">,</span>
                                                    <span class="n">formedFrom</span> <span class="nv">tronRequest</span><span class="p">:</span> <span class="kt">BaseRequest</span><span class="o">&lt;</span><span class="kt">Model</span><span class="p">,</span><span class="kt">ErrorModel</span><span class="o">&gt;</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>Plugins can be used globally, on <code><a href="Classes/TRON.html">TRON</a></code> instance itself, or locally, on concrete <code><a href="Classes/APIRequest.html">APIRequest</a></code>. Keep in mind, that plugins that are added to <code><a href="Classes/TRON.html">TRON</a></code> instance, will be called for each request. There are some really cool use-cases for global and local plugins.</p>

<p>By default, no plugins are used, however two plugins are implemented as a part of <code><a href="Classes/TRON.html">TRON</a></code> framework.</p>
<h3 id='networkactivityplugin' class='heading'>NetworkActivityPlugin</h3>

<p><code><a href="Classes/NetworkActivityPlugin.html">NetworkActivityPlugin</a></code> serves to monitor requests and control network activity indicator in iPhone status bar. This plugin assumes you have only one <code><a href="Classes/TRON.html">TRON</a></code> instance in your application.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">tron</span> <span class="o">=</span> <span class="kt">TRON</span><span class="p">(</span><span class="nv">baseURL</span><span class="p">:</span> <span class="s">"https://api.myapp.com"</span><span class="p">,</span> <span class="nv">plugins</span><span class="p">:</span> <span class="p">[</span><span class="kt">NetworkActivityPlugin</span><span class="p">()])</span>
</code></pre>
<h3 id='networkloggerplugin' class='heading'>NetworkLoggerPlugin</h3>

<p><code><a href="Classes/NetworkLoggerPlugin.html">NetworkLoggerPlugin</a></code> is used to log responses to console in readable format. By default, it prints only failed requests, skipping requests that were successful.</p>
<h3 id='local-plugins' class='heading'>Local plugins</h3>

<p>There are some very cool concepts for local plugins, some of them are described in dedicated <a href="Docs/PluginConcepts.md">PluginConcepts</a> page.</p>
<h2 id='alternatives' class='heading'>Alternatives</h2>

<p>We are dedicated to building best possible tool for interacting with RESTful web-services. However, we understand, that every tool has it&rsquo;s purpose, and therefore it&rsquo;s always useful to know, what other tools can be used to achieve the same goal.</p>

<p><code><a href="Classes/TRON.html">TRON</a></code> was heavily inspired by <a href="https://github.com/Moya/Moya">Moya framework</a> and <a href="https://github.com/TheLevelUp/levelup-sdk-ios/blob/master/Source/API/Client/LUAPIClient.h">LevelUPSDK</a></p>
<h2 id='license' class='heading'>License</h2>

<p><code><a href="Classes/TRON.html">TRON</a></code> is released under the MIT license. See LICENSE for details.</p>
<h2 id='about-mlsdev' class='heading'>About MLSDev</h2>

<p><a href="https://mlsdev.com"><img src="https://github.com/MLSDev/development-standards/raw/master/mlsdev-logo.png" alt="MLSDev.com"></a></p>

<p><code><a href="Classes/TRON.html">TRON</a></code> is maintained by <a href="https://mlsdev.com">MLSDev, Inc.</a> We specialize in providing all-in-one solution in mobile and web development. Our team follows Lean principles and works according to agile methodologies to deliver the best results reducing the budget for development and its timeline.</p>

<p>Find out more <a href="https://mlsdev.com">here</a> and don&rsquo;t hesitate to <a href="https://mlsdev.com/contact_us">contact us</a>!</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2019 <a class="link" href="https://github.com/DenTelezhkin" target="_blank" rel="external">Denys Telezhkin</a>. All rights reserved. (Last updated: 2019-03-12)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy  v0.9.4</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
